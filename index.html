<!DOCTYPE html>
<html>
<head>
  <title>Capture Location</title>
  <script>
    function sendLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          var lat = position.coords.latitude;
          var lon = position.coords.longitude;

          var data = {
            latitude: lat,
            longitude: lon
          };
          fetch("https://script.google.com/macros/s/AKfycbzD6os9QVR9xZi1JrgIt0cDGzRoOxVbdrmTovTwXs5LjrGtq3e74KXpfM2_LhcSvYrqkg/exec", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
          }).then(response => response.text())
          .then(result => {
            console.log("Location sent: " + result);
            var formUrl = "https://docs.google.com/forms/d/e/1FAIpQLSfjJOU8SINFU0P3rVHwSWb6zKd2gU41xkzeww-PFHwtlAdtCg/viewform?usp=pp_url&entry.348082176=90.00000001&entry.248800820=180.00000001"
              + "?entry.348082176=" + lat
              + "&entry.248800820=" + lon;
            window.location.href = formUrl;
          });
        });
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }
  </script>
</head>
<body onload="sendLocation()">
  <p>Capturing your location...</p>
</body>
</html>

